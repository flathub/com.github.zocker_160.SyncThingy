# shamelessly copied from https://github.com/flathub/org.freedesktop.Sdk.Extension.golang
name: golang1.20.12
modules:
  - name: golang
    buildsystem: simple
    sources:
      - type: archive
        only-arches:
          - aarch64
        url: https://go.dev/dl/go1.20.12.linux-arm64.tar.gz
        sha256: 8afe8e3fb6972eaa2179ef0a71678c67f26509fab4f0f67c4b00f4cdfa92dc87
      - type: archive
        only-arches:
          - x86_64
        url: https://go.dev/dl/go1.20.12.linux-amd64.tar.gz
        sha256: 9c5d48c54dd8b0a3b2ef91b0f92a1190aa01f11d26e98033efa64c46a30bba7b
    build-commands:
      - install -d ${FLATPAK_DEST}/lib/sdk/golang
      - cp -rpv * ${FLATPAK_DEST}/lib/sdk/golang/

  - name: scripts
    sources:
      - type: script
        commands:
          - export GOROOT=${FLATPAK_DEST}/lib/sdk/golang
          - export PATH=$PATH:$GOROOT/bin
        dest-filename: enable.sh
    buildsystem: simple
    build-commands:
      - cp enable.sh ${FLATPAK_DEST}/lib/sdk/golang/
